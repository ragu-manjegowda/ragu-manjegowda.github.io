<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-147567345-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-147567345-1');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Open Graph meta tags for social media sharing -->
  <meta property="og:type" content="{% if page.layout == 'post' %}article{% else %}website{% endif %}" />
  <meta property="og:title" content="{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title }}{% endif %}" />
  <meta property="og:description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}" />
  <meta property="og:url" content="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}" />
  <meta property="og:site_name" content="{{ site.title }}" />
  {% comment %} Use post/page image, background-image, or site thumbnail as fallback {% endcomment %}
  {% if page.image %}
    {% assign og_image = page.image %}
  {% elsif page.background-image %}
    {% assign og_image = page.background-image %}
  {% else %}
    {% assign og_image = site.thumbnail %}
  {% endif %}
  {% comment %} Handle relative vs absolute image URLs {% endcomment %}
  {% assign first_char = og_image | slice: 0 %}
  {% if first_char == '/' %}
    {% assign second_char = og_image | slice: 1 %}
    {% if second_char == '/' %}
      <meta property="og:image" content="{{ og_image }}" />
    {% else %}
      <meta property="og:image" content="{{ og_image | prepend: site.baseurl | prepend: site.url }}" />
    {% endif %}
  {% elsif og_image contains 'http' %}
    <meta property="og:image" content="{{ og_image }}" />
  {% else %}
    <meta property="og:image" content="{{ og_image | prepend: '/images/' | prepend: site.baseurl | prepend: site.url }}" />
  {% endif %}
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  {% if page.layout == 'post' %}
  <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}" />
  <meta property="article:author" content="{% if page.author %}{{ page.author }}{% else %}{{ site.owner.name }}{% endif %}" />
  {% if page.tags %}
    {% for tag in page.tags %}
  <meta property="article:tag" content="{{ tag }}" />
    {% endfor %}
  {% endif %}
  {% endif %}
  <!-- Twitter Card meta tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title }}{% endif %}" />
  <meta name="twitter:description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}" />
  <meta name="twitter:image" content="{% if first_char == '/' %}{% if second_char == '/' %}{{ og_image }}{% else %}{{ og_image | prepend: site.baseurl | prepend: site.url }}{% endif %}{% elsif og_image contains 'http' %}{{ og_image }}{% else %}{{ og_image | prepend: '/images/' | prepend: site.baseurl | prepend: site.url }}{% endif %}" />
  <meta name="description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}" />

  <title>{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>


  <link rel="shortcut icon" href="{{ "/images/favicon.ico" | prepend: site.baseurl }}" type="image/x-icon" />
  <link rel="icon" href="{{ "/images/favicon.ico" | prepend: site.baseurl }}" type="image/x-icon" />
  <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}" />
  <link rel="stylesheet" href="{{ "/css/main.css" | prepend: site.baseurl }}" />{%
  if page.background-image %}{%
    assign first_char = page.background-image | slice: 0 %}{%
    if first_char == '/' %}{%
      assign second_char = page.background-image | slice: 1 %}{%
      if second_char == '/' %}{% comment %}                     // remote                 {% endcomment %}{%
        assign imageurl = page.background-image %}{%
      else %}{% comment %}                                      // local, not in /images/ {% endcomment %}{%
        assign imageurl = page.background-image | prepend: site.baseurl %}{%
      endif %}{%
    else %}{% comment %}                                        // local, in /images/     {% endcomment %}{%
      assign imageurl = page.background-image | prepend: "/images/" | prepend: site.baseurl %}{%
    endif %}
  <style>
  #main > header {
    background-image: -moz-linear-gradient(top, rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url("{{ imageurl }}");
    background-image: -webkit-linear-gradient(top, rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url("{{ imageurl }}");
    background-image: -ms-linear-gradient(top, rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url("{{ imageurl }}");
    background-image: linear-gradient(top, rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url("{{ imageurl }}");
  }
  </style>{%
  endif %}{%
  if page.style-includes %}{%
    for include in page.style-includes %}{%
      assign test1 = include | slice: 0,2 %}{%
      if test1 == "//" %}
  <link rel="stylesheet" href="{{ include }}" />{%
      else %}
  <link rel="stylesheet" href="{{ include | prepend: site.baseurl }}" />{%
      endif %}{%
    endfor %}{%
  endif %}{%
  if page.style %}
<style>
{{ page.style }}
</style>{%
  endif %}
  <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ "/feed.xml" | prepend: site.baseurl | prepend: site.url }}">
</head>
